# Base image for controller and sidecar
FROM registry.access.redhat.com/ubi8/ubi-minimal@sha256:e0814339ffc6c933652bed0c5f8b6416b9a3d40be2f49f95e6e4128387d2a24a AS container-base
RUN microdnf update -y \
&& \
microdnf clean all

# Controller
FROM container-base AS controller
WORKDIR /
COPY bin/dell-replication-controller ./
ENTRYPOINT ["/dell-replication-controller"]

# Sidecar
FROM container-base AS sidecar
WORKDIR /
COPY bin/dell-csi-replicator ./
ENTRYPOINT ["/dell-csi-replicator"]
